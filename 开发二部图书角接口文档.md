**开发二部图书角接口文档**

接口版本号：（V01.00）

文档修订记录
============

| 版本编号 | \*变化 状态 | 简要说明 变更内容和变更范围 | 变更人 | 变更日期   | 备注   |
|----------|-------------|-----------------------------|--------|------------|--------|
| V01.00   | A           | 新增001-010接口             | 钟源   | 2017.11.24 | 迭代一 |

\*变化状态：A——增加，M——修改，D——删除

注：该文档由接口提供方编写，接口请求方不需要。

目录
====

[文档修订记录 1](#文档修订记录)

[一、接口公共规范 3](#一接口公共规范)

[二、接口列表 3](#二接口列表)

[三、接口调用规则 3](#三接口调用规则)

[四、接口格式详细规格 4](#四接口格式详细规格)

>   [4.1 Book-001 CustQueryIsBinded 查询用户是否绑定
>   4](#book-001-custqueryisbinded-查询用户是否绑定)

>   [4.2 Book-002 CustBind 用户绑定验证 4](#book-002-custbind-用户绑定验证)

>   [4.3 Book-003 CustQueryBookList 用户查询图书列表
>   5](#book-003-custquerybooklist-用户查询图书列表)

>   [4.4 Book-004 CustQueryBookDetail用户查询图书详情
>   6](#book-004-custquerybookdetail用户查询图书详情)

>   [4.5 Book-005 CustLikeBook 用户点赞图书
>   6](#book-005-custlikebook-用户点赞图书)

>   [4.6 Book-006 CustQueryBookCommentHistory 用户查询图书评论历史
>   7](#book-006-custquerybookcommenthistory-用户查询图书评论历史)

>   [4.7 Book-007 CustCommentBook 用户评论图书
>   8](#book-007-custcommentbook-用户评论图书)

>   [4.8 Book-008 CustQueryBookBorrowHistory 用户查看图书借阅历史
>   8](#book-008-custquerybookborrowhistory-用户查看图书借阅历史)

>   [4.9 Book-009 CustBorrowBook 用户借书 9](#book-009-custborrowbook-用户借书)

>   [4.10 Book-010 CustReturnBook 用户还书 9](#book-010-custreturnbook-用户还书)

>   [4.11 Book-011 CustQueryBookBorrowRecord 用户查看自己借阅记录
>   10](#book-011-custquerybookborrowrecord-用户查看自己借阅记录)

一、接口公共规范
================

参见《BOCNET客户体验接口总册.docx》

二、接口列表
============

*接口列表如接口间存在依赖关系，比如哪些接口需要在哪些接口调用之前调用等，需要在接口描述中说明。*

| **接口编号** | **接口名称**                | **接口描述**         | **负责人** |
|--------------|-----------------------------|----------------------|------------|
| Book-001     | CustQueryIsBinded           | 查询用户是否绑定     | 钟源       |
| Book -002    | CustBind                    | 用户绑定验证         | 钟源       |
| Book -003    | CustQueryBookList           | 用户查询图书列表     | 钟源       |
| Book -004    | CustQueryBookDetail         | 用户查询图书详情     | 钟源       |
| Book -005    | CustLikeBook                | 用户点赞图书         | 钟源       |
| Book -006    | CustQueryBookCommentHistory | 用户查询图书评论历史 | 钟源       |
| Book -007    | CustCommentBook             | 用户评论图书         | 钟源       |
| Book -008    | CustQueryBookBorrowHistory  | 用户查看图书借阅历史 | 钟源       |
| Book -009    | CustBorrowBook              | 用户借书             | 钟源       |
| Book -010    | CustReturnBook              | 用户还书             | 钟源       |
| Book -011    | CustQueryBookBorrowRecord   | 用户查看自己借阅记录 | 钟源       |

三、接口调用规则
================

*说明：接口调用顺序为产品用例对应的接口调用规则。*

| **序号** | **产品用例** | **接口调用顺序** | **备注** |
|----------|--------------|------------------|----------|
| 1        |              |                  |          |
| 2        |              |                  |          |

四、接口格式详细规格
====================

*注意报文样例需按照新格式，新增对JSONS接口的调用需采用新接口调用方式*

### 4.1 Book-001 CustQueryIsBinded 查询用户是否绑定

请求报文：

| **序号** | **数据项** | **业务含义** | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|--------------|--------------|-----------------------|--------------|----------|
| *1*      | code       | 前端上送code | String       | M                     |              |          |

返回报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **数据说明**  |
|----------|------------|------------------|--------------|---------------|
| *1*      | isBinded   | 是否绑定         | String       | *0：否 1：是* |
| *2*      | openid     | 微信小程序openid | String       |               |
| *3*      | userNo     | 员工号           | String       |               |
| *4*      | userName   | 员工姓名         | String       |               |

### 4.2 Book-002 CustBind 用户绑定验证

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | userNo     | 员工号           | String       | M                     |              |          |
| *3*      | userName   | 员工姓名         | String       | M                     |              |          |
| *4*      | nickName   | 微信昵称         | String       | M                     |              |          |
| *5*      | headImgUrl | 微信头像Url      | String       | O                     |              |          |

返回报文：

| **序号** | **数据项** | **业务含义** | **数据类型** | **数据说明** |
|----------|------------|--------------|--------------|--------------|
| *1*      |            |              |              |              |

### 4.3 Book-003 CustQueryBookList 用户查询图书列表

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则**                   | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------------------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |                                |          |
| *2*      | bookName   | 图书名           | String       | O                     |                                |          |
| *3*      | bookType   | 图书分类         | String       | O                     | *-1：全部； 0：党建；1：技术*  |          |
| *4*      | bookStatus | 图书状态         | String       | O                     | *-1：全部； 0：借出； 1：在库* |          |

返回报文：

| **序号** | **数据项**         | **业务含义**      | **数据类型** | **数据说明**                |
|----------|--------------------|-------------------|--------------|-----------------------------|
| *1*      | bookList循环体开始 |                   |              |                             |
| *2*      | bookId             | 图书编号          | int          |                             |
| *3*      | bookName           | 图书名            | String       |                             |
| *4*      | bookWriter         | 图书作者          | String       |                             |
| *5*      | bookBrief          | 图书简介          | String       | 默认为‘-’                   |
| *6*      | bookType           | 图书分类          | String       | 0：党建；1：技术            |
| *7*      | bookStatus         | 图书状态          | String       | 0：借出；1：在库            |
| *8*      | bookSource         | 图书来源          | String       | 0：采购；1：捐赠            |
| *9*      | bookBuyer          | 图书购买者        | String       |                             |
| *10*     | bookTime           | 图书购买/捐赠时间 | String       |                             |
| *11*     | bookRemark         | 图书备注          | String       | 默认为‘-’                   |
| *12*     | bookLikeNum        | 图书点赞数        | int          | 默认为0                     |
| *13*     | bookCommentNum     | 图书评论数        | int          | 默认为0                     |
| *14*     | recTime            | 入库时间          | String       | 格式：2017-12-04 20:01:13.0 |
| *15*     | bookList循环体结束 |                   |              |                             |

### 4.4 Book-004 CustQueryBookDetail用户查询图书详情

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | bookId     | 图书编号         | int          | *M*                   |              |          |

返回报文：

| **序号** | **数据项**     | **业务含义**      | **数据类型** | **数据说明**                |
|----------|----------------|-------------------|--------------|-----------------------------|
| *1*      | bookId         | 图书编号          | int          |                             |
| *2*      | bookName       | 图书名            | String       |                             |
| *3*      | bookWriter     | 图书作者          | String       |                             |
| *4*      | bookBrief      | 图书简介          | String       | 默认为‘-’                   |
| *5*      | bookType       | 图书分类          | String       | 0：党建；1：技术            |
| *6*      | bookStatus     | 图书状态          | String       | 0：借出；1：在库            |
| *7*      | bookSource     | 图书来源          | String       | 0：采购；1：捐赠            |
| *8*      | bookBuyer      | 图书购买者        | String       |                             |
| *9*      | bookTime       | 图书购买/捐赠时间 | String       |                             |
| *10*     | bookRemark     | 图书备注          | String       | 默认为‘-’                   |
| *11*     | bookLikeNum    | 图书点赞数        | int          | 默认为0                     |
| *12*     | bookCommentNum | 图书评论数        | int          | 默认为0                     |
| *13*     | recTime        | 入库时间          | String       | 格式：2017-12-04 20:01:13.0 |
| *14*     | isBorrowed     | 是否借阅          | String       | *0：否 1：是*               |
| *15*     | id             | 借阅记录序列号    | int          | *当*isBorrowed为1时有意义   |
| *16*     | isLiked        | 是否点赞          | String       | *0：否 1：是*               |
| *17*     | isCommented    | 是否评论          | String       | *0：否 1：是*               |

### 4.5 Book-005 CustLikeBook 用户点赞图书

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | bookId     | 图书编号         | int          | *M*                   |              |          |

返回报文：

| **序号** | **数据项** | **业务含义** | **数据类型** | **数据说明** |
|----------|------------|--------------|--------------|--------------|
| *1*      |            |              |              |              |

### 4.6 Book-006 CustQueryBookCommentHistory 用户查询图书评论历史

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | bookId     | 图书编号         | int          | *M*                   |              |          |

返回报文：

| **序号** | **数据项**                   | **业务含义**     | **数据类型** | **数据说明**                |
|----------|------------------------------|------------------|--------------|-----------------------------|
| *1*      | commentHistoryList循环体开始 |                  |              |                             |
| *2*      | bookId                       | 图书编号         | int          |                             |
| *3*      | openid                       | 微信小程序openid | String       |                             |
| *4*      | headImgUrl                   | 微信头像Url      | String       |                             |
| *5*      | userName                     | 员工姓名         | String       |                             |
| *6*      | comment                      | 评论内容         | String       |                             |
| *7*      | recTime                      | 评论时间         | String       | 格式：2017-12-04 20:01:13.0 |
| *8*      | commentHistoryList循环体结束 |                  |              |                             |

### 4.7 Book-007 CustCommentBook 用户评论图书

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | bookId     | 图书编号         | int          | *M*                   |              |          |
| *3*      | headImgUrl | 微信头像Url      | String       | O                     |              |          |
| *4*      | userName   | 员工姓名         | String       | M                     |              |          |
| *5*      | comment    | 评论内容         | String       | M                     | 200以内      |          |

返回报文：

| **序号** | **数据项** | **业务含义** | **数据类型** | **数据说明** |
|----------|------------|--------------|--------------|--------------|
| *1*      |            |              |              |              |

### 4.8 Book-008 CustQueryBookBorrowHistory 用户查看图书借阅历史

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | bookId     | 图书编号         | int          | *M*                   |              |          |

返回报文：

| **序号** | **数据项**                  | **业务含义**     | **数据类型** | **数据说明**                |
|----------|-----------------------------|------------------|--------------|-----------------------------|
| *1*      | borrowHistoryList循环体开始 |                  |              |                             |
| *2*      | bookId                      | 图书编号         | int          |                             |
| *3*      | bookStatus                  | 图书状态         | String       |                             |
| *4*      | openid                      | 微信小程序openid | String       |                             |
| *5*      | headImgUrl                  | 微信头像Url      | String       |                             |
| *6*      | userName                    | 员工姓名         | String       |                             |
| *7*      | borrowTime                  | 借出时间         | String       | 格式：2017-12-04 20:01:13.0 |
| *8*      | returnTime                  | 归还时间         | String       | 格式：2017-12-04 20:01:13.0 |
| *9*      | borrowHistoryList循环体结束 |                  |              |                             |

### 4.9 Book-009 CustBorrowBook 用户借书

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *2*      | bookId     | 图书编号         | int          | *M*                   |              |          |
| *3*      | bookName   | 图书名           | String       | *M*                   |              |          |
| *3*      | headImgUrl | 微信头像Url      | String       | *O*                   |              |          |
| *4*      | userName   | 员工姓名         | String       | *M*                   |              |          |

返回报文：

| **序号** | **数据项** | **业务含义**   | **数据类型** | **数据说明** |
|----------|------------|----------------|--------------|--------------|
| *1*      | id         | 借阅记录序列号 | int          |              |

### 4.10 Book-010 CustReturnBook 用户还书

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | id         | 借阅记录序列号   | int          | M                     |              |          |
| *2*      | openid     | 微信小程序openid | String       | M                     |              |          |
| *3*      | bookId     | 图书编号         | int          | *M*                   |              |          |
| *4*      | headImgUrl | 微信头像Url      | String       | *O*                   |              |          |
| *5*      | userName   | 员工姓名         | String       | *M*                   |              |          |

返回报文：

| **序号** | **数据项** | **业务含义** | **数据类型** | **数据说明** |
|----------|------------|--------------|--------------|--------------|
| *1*      |            |              |              |              |

### 4.11 Book-011 CustQueryBookBorrowRecord 用户查看自己借阅记录

请求报文：

| **序号** | **数据项** | **业务含义**     | **数据类型** | **必选（M）/可选(O)** | **填写规则** | **备注** |
|----------|------------|------------------|--------------|-----------------------|--------------|----------|
| *1*      | openid     | 微信小程序openid | String       | M                     |              |          |

返回报文：

| **序号** | **数据项**                 | **业务含义**     | **数据类型** | **数据说明**                |
|----------|----------------------------|------------------|--------------|-----------------------------|
| *1*      | borrowRecordList循环体开始 |                  |              |                             |
| *2*      | bookId                     | 图书编号         | int          |                             |
| *3*      | bookName                   | 图书名           | String       |                             |
| *4*      | borrowStatus               | 图书借还状态     | String       | 0：借出；1：归还            |
| *5*      | openid                     | 微信小程序openid | String       |                             |
| *6*      | headImgUrl                 | 微信头像Url      | String       |                             |
| *7*      | userName                   | 员工姓名         | String       |                             |
| *8*      | borrowTime                 | 借出时间         | String       | 格式：2017-12-04 20:01:13.0 |
| *9*      | returnTime                 | 归还时间         | String       | 格式：2017-12-04 20:01:13.0 |
| *10*     | bookStatus                 | 图书状态         | String       | *0：借出； 1：在库*         |
| *11*     | borrowRecordList循环体结束 |                  |              |                             |
